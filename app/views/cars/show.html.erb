<div class="container-fluid mt-4">
  <div class="row">
      <div class="col text-center align-items-center" id="car-show-main-header">
        <% if @car.user == current_user %>
          <h1>Your <%= @car.brand %> <%= @car.model %></h1>
        <% else %>
          <h1><%= @car.brand %> <%= @car.model %></h1>
        <% end %>
      </div>
  </div>
</div>

<div class="container mt-4">
  <div class="car-header-info">
    <p><%= link_to 'Back' , :back %></p>
    <p>|</p>
    <p><%= link_to 'Home' , cars_path %></p>
    <p>|</p>
    <p><%= @car.category %></p>
    <p>|</p>
    <p><%= @car.brand %></p>
    <p>|</p>
    <p><%= @car.model %></p>
  </div>

  <div class="car-main-info">
    <div id="cars-carousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner w-100">
        <% @car.photos.each_with_index do |photo, index| %>
          <div class="car-show-item carousel-item <%= 'active' if index == 0%>" >
            <%= cl_image_tag photo.key, class: 'd-block w-100 show-car' %>
          </div>
        <% end %>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#cars-carousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#cars-carousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <div class="car-main-specs">
      <div class="text">
        <h3><%= @car.brand %> <%= @car.model %></h3>
        <p><strong>Transmission</strong>: <%= @car.transmission %></p>
        <p><strong>Found in</strong>: <%= @car.location %></p>
        <p><strong>Price per day</strong>: <%= @car.day_rate %></p>
        <p><strong>Wouldn't you like to know...</strong> </p>
        <p><%= @car.description %></p>
      </div>
    </div>
  </div>

  <hr class="gradient">
  <div class="car-show-secondary-section">

      <% unless @car.user == current_user  %>
        <div class="booking-form car-main-specs">
          <h3 class="car-show-secondary-section-title">Book now!</h3>
          <%= simple_form_for [@car, @booking] do |f| %>
            <%= f.input :start_date,
              as: :string,
              label_html: { class: 'formLabelStyling' },
              input_html: { data: { controller: "datepicker" }, class: "formInputStyling" } %>
            <%= f.input :end_date,
              as: :string,
              input_html: { data: { controller: "datepicker" }, class: "formInputStyling" } %>
            <%= f.submit %>
          <% end %>
        </div>

        <%# <div class="booking-details car-main-specs"> %>
          <%# <h3 class="car-show-secondary-section-title">Your booking details</h3> %>
          <%# <%= @booking.start_date %>
        <%# </div> %>

      <% end %>



      <% if @car.user == current_user %>
        <div class="active-booking-main-specs w-100">
          <h3 class="car-show-secondary-section-title">Active bookings for your car</h3>
          <div class="active-bookings">
              <% @car.bookings.each do |booking| %>
                  <div class="active-booking-details">
                  <strong><p>Booking Reference: <%= booking.id %></p></strong>
                  <p>Renter: <%= booking.user.first_name %> <%= booking.user.last_name %></p>
                  <p>Booking Dates: <%= booking.start_date.strftime('%b %d %Y') %> - <%= booking.end_date.strftime('%b %d %Y') %></p>
                  </div>
              <% end %>
          </div>
        </div>
      <% end %>




  </div>




</div>
